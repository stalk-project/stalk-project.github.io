<!DOCTYPE html><html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>STALK-lite</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #0d0d0d;
      color: #e0e0e0;
      font-family: 'Segoe UI', sans-serif;
    }
    .container {
      max-width: 800px;
      margin: 60px auto;
      padding: 0 16px;
    }
    h1 {
      font-size: 24px;
      text-align: center;
      margin-bottom: 24px;
    }
    input[type="text"] {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border: none;
      border-radius: 4px;
      margin-bottom: 16px;
      background-color: #1c1c1c;
      color: white;
    }
    button {
      width: 100%;
      padding: 12px;
      background: #2f7aff;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
    }
    .result {
      border-top: 1px solid #444;
      margin-top: 16px;
      padding-top: 16px;
    }
    .entry {
      margin-bottom: 12px;
      padding: 12px;
      background: #1a1a1a;
      border-radius: 6px;
    }
    .entry h3 {
      margin: 0 0 8px;
      font-size: 18px;
      color: #6fa8ff;
    }
    .entry p {
      margin: 2px 0;
    }
    @media (max-width: 600px) {
      .container {
        margin: 20px auto;
      }
      h1 {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>STALK-lite</h1>
    <input type="text" id="query" placeholder="Введите запрос...">
    <button onclick="search()">Поиск</button>
    <div id="results" class="result"></div>
  </div>  <script>
    const schemas = {
      telegrampt1: [
        { key: "Telegram ID", label: "ID" },
        { key: "Номер телефона", label: "Номер телефона" },
        { key: "Username", label: "Юзернейм" },
        { key: "Имя", label: "Имя" }
      ],
      telegrampt2: [
        { key: "Telegram ID", label: "ID" },
        { key: "Номер телефона", label: "Номер телефона" },
        { key: "Username", label: "Юзернейм" },
        { key: "Имя", label: "Имя" }
      ],
      telegrampt3: [
        { key: "Telegram ID", label: "ID" },
        { key: "Номер телефона", label: "Номер телефона" },
        { key: "username", label: "Юзернейм" },
        { key: "Имя", label: "Имя" }
      ],
      telegrampt4: [
        { key: "Telegram ID", label: "ID" },
        { key: "Имя", label: "Имя" },
        { key: "Фамилия", label: "Фамилия" },
        { key: "Почта", label: "Почта" },
        { key: "Номер телефона", label: "Номер телефона" }
      ],
      telegrampt5: [
        { key: "string_field_0", label: "ID" },
        { key: "string_field_1", label: "Номер телефона" }
      ],
      bolshayaperemena: [
        { key: "string_field_0", label: "Фамилия" },
        { key: "string_field_1", label: "Имя" },
        { key: "string_field_2", label: "Отчество" },
        { key: "string_field_3", label: "Дата рождения" },
        { key: "string_field_4", label: "Телефон" },
        { key: "string_field_5", label: "Почта" },
        { key: "string_field_6", label: "Буква класса" },
        { key: "string_field_7", label: "Адрес уч.заведения" }
      ],
      vtbclients: [
        { key: "Фамилия", label: "Фамилия" },
        { key: "Имя", label: "Имя" },
        { key: "Отчество", label: "Отчество" },
        { key: "Дата рождения", label: "Дата рождения" },
        { key: "Местоположение", label: "Местоположение" },
        { key: "Номер телефона", label: "Номер телефона" },
        { key: "Почта", label: "Почта" }
      ],
      zonatelecom: [
        { key: "Фамилия", label: "Фамилия" },
        { key: "Имя", label: "Имя" },
        { key: "Номер телефона", label: "Номер телефона" },
        { key: "Адрес", label: "Адрес" },
        { key: "Почта", label: "Почта" },
        { key: "Контактный телефон", label: "Контактный телефон" }
      ],
      medicine_and_pharmacy: [
        { key: "ФИО", label: "ФИО" },
        { key: "Номер телефона", label: "Номер телефона" },
        { key: "Город", label: "Город" },
        { key: "Дата рождения", label: "Дата рождения" },
        { key: "ИНН", label: "ИНН" }
      ],
      RussianCitizens2025: [
        { key: "Номер телефона", label: "Номер телефона" },
        { key: "ФИО", label: "ФИО" },
        { key: "Дата рождения", label: "Дата рождения" },
        { key: "ИНН", label: "ИНН" }
      ]
    };

    const dbTitles = {
      telegrampt1: "Telegram",
      telegrampt2: "Telegram",
      telegrampt3: "Telegram",
      telegrampt4: "Telegram",
      telegrampt5: "Telegram",
      bolshayaperemena: "Большая перемена",
      vtbclients: "Клиенты ВТБ",
      zonatelecom: "Зона Телеком",
      medicine_and_pharmacy: "Медицина и аптеки",
      RussianCitizens2025: "Граждане РФ 2025"
    };

    async function search() {
      const q = document.getElementById('query').value.trim();
      if (!q) return;
      document.getElementById('results').innerHTML = '<p>Поиск...</p>';

      const res = await fetch(`https://cloudsearch-131166517111.us-central1.run.app/multiSearch?q=${encodeURIComponent(q)}&limit=20`);
      const data = await res.json();

      const container = document.getElementById('results');
      container.innerHTML = '';

      data.forEach(entry => {
        const db = entry.source || 'unknown';
        const schema = schemas[db];
        const dbName = dbTitles[db] || db;

        const block = document.createElement('div');
        block.className = 'entry';

        const title = document.createElement('h3');
        title.innerText = dbName + ' ↓';
        block.appendChild(title);

        if (schema) {
          schema.forEach(f => {
            if (entry[f.key]) {
              const line = document.createElement('p');
              line.innerText = `${f.label}: ${entry[f.key]}`;
              block.appendChild(line);
            }
          });
        } else {
          const raw = document.createElement('pre');
          raw.innerText = JSON.stringify(entry, null, 2);
          block.appendChild(raw);
        }

        container.appendChild(block);
      });
    }
  </script></body>
</html>
